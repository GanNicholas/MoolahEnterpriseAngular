<app-header></app-header>
<br/>
<br/>
<br/>
<br/>
<a href="/index"><img
  src="http://localhost:8080/MoolahEnterprise-war/resources/images/updated_createCompany.png"
  width="100%" height="700" style="z-index:-100;" /></a>
<h2 style="text-align: center" class="secondaryHeader" style="z-index:1;margin-top:-30%;text-align:center;">
  Purchase Moolah Credits
</h2>

<form #purchaseCreditForm="ngForm" (ngSubmit)="purchaseMoolahCredit()" class="classBody" style="z-index:1">
  <div *ngIf="back && !success">
    <table style="margin: 0 auto" cellspacing="20px">
      <tr>
        <td>Credits to Purchase</td>
        <td>
          <p-inputNumber
            id="creditToBuy"
            name="creditToBuy"
            [(ngModel)]="creditToBuy"
            [required]="true"
            requiredMessage="Number of credits to purchase must be greater than 0"
            class="bodyText, inputWidth, p-field"
            [min]="0"
            [step]="100"
            [showButtons]="true"
            (ngModelChange)="onCompleteCreditTopUp()"
          ></p-inputNumber>
        </td>
      </tr>

      <tr>
        <td>Amount Payable</td>
        <td>$ &nbsp;{{ getAmountPayable() | number: ".2-2" }}</td>
      </tr>
    </table>

    <div style="text-align: center">
      <p-button (click)="goNext()" label="Next"> &nbsp;</p-button>
    </div>
  </div>

  <div *ngIf="next && !success" ng-class="classBody">
    <table style="margin: 0 auto" cellspacing="20px">
      <tr>
        <td>Name of Card Holder&nbsp;</td>
        <td>
          <input
            pInputText
            id="creditCardName"
            name="creditCardName"
            type="text"
            [(ngModel)]="creditCardName"
            required="true"
            requiredMessage="Name of Card Holder is required"
            class="bodyText, inputWidth, p-field"
          />
        </td>
      </tr>

      <tr>
        <td>Card Number&nbsp;</td>
        <td>
          <input
            pInputText
            id="creditCardNumber"
            name="creditCardNumber"
            type="text"
            [(ngModel)]="creditCardNumber"
            [required]="true"
            requiredMessage="Card Number is required"
            class="bodyText, inputWidth, p-field"
          />
        </td>
      </tr>

      <tr>
        <td>Card CVV&nbsp;</td>
        <td>
          <input
            pInputText
            id="creditCardCvv"
            name="creditCardCvv"
            type="text"
            [(ngModel)]="creditCardCvv"
            [required]="true"
            requiredMessage="CVV is required"
            class="bodyText, inputWidth, p-field"
          />
        </td>
      </tr>

      <tr>
        <td>Expiry Date&nbsp;</td>
        <td>
          <div class="p-field p-col-12 p-md-4">
            <p-calendar
              id="creditCardExp"
              name="creditCardExp"
              [(ngModel)]="creditCardExp"
              view="month"
              dateFormat="mm/yy"
              [yearNavigator]="true"
              yearRange="2021:2040"
              [readonlyInput]="true"
              inputId="monthpicker"
            ></p-calendar>
          </div>
        </td>
      </tr>

      <tr>
        <td>Number of Credits</td>
        <td>{{ creditToBuy }}</td>
      </tr>

      <tr>
        <td>Amount Payable</td>
        <td>$ &nbsp;{{ getAmountPayable() | number: ".2-2" }}</td>
      </tr>
    </table>

    <div style="text-align: center"  class="classBody">
      <p-button (click)="goBack()" label="Back"> &nbsp;</p-button> &nbsp;
      <input pInputText type="submit" value="Make Payment" />
    </div>
  </div>
</form>

<div *ngIf="success" style="text-align: center" ng-class="classBody">
  <p>
    You have successfully purchased {{ creditToBuy }} credits for ${{ getAmountPayable() }}
  </p>
  <p-button (click)="backToHome()">Back to Home</p-button>
</div>
<br/>
<p-toast></p-toast>
<app-footer></app-footer>
