<h2 style="text-align: center" class="pageHeader">Create New Product</h2>
<br />

<div *ngIf="resultSuccess == true" style="color: blue">
    {{ message }}
</div>

<div *ngIf="resultError == true" style="color: red">
    {{ message }}
</div>

<h2 class="secondaryHeader" style="text-align: center;">Product Information</h2>
<form #createProductForm="ngForm" (ngSubmit)="createProduct(createProductForm)" style="height: 10%">

    <table width="60%" style="border-spacing: 0 23px; margin-left: 35%; ">
        <tr>
            <td width="20%" style="font-weight: bold" class="bodyText">
                Product Name
            </td>
            <td>
                <input pInputText id="productName" name="productName" #productName="ngModel" type="text"
                    [(ngModel)]="product.productName" required="true" class="bodyText, inputWidth" />
            </td>
            <td>
                <div *ngIf="
                productName.invalid &&
                (productName.dirty || productName.touched || submitted)
              " class="errorText">
                    <div *ngIf="productName.errors != null && productName.errors.required">
                        Product Name is required.
                    </div>
                </div>
            </td>
        </tr>

        <tr>
            <td width="20%" style="font-weight: bold" class="bodyText">
                Product Description
            </td>
            <td>
                <input pInputText id="productDescription" name="productDescription" #productDescription="ngModel"
                    type="text" [(ngModel)]="product.description" required="true" class="bodyText, inputWidth" />
            </td>
            <td>
                <div *ngIf="
                productDescription.invalid &&
                (productDescription.dirty || productDescription.touched || submitted)
              " class="errorText">
                    <div *ngIf="productDescription.errors != null && productDescription.errors.required">
                        Product description is required.
                    </div>
                </div>
            </td>
        </tr>

        <tr>
            <td width="20%" style="font-weight: bold" class="bodyText">
                Product Coverage Term
            </td>
            <td>
                <input pInputText id="coverageTerm" name="coverageTerm" #coverageTerm="ngModel" type="text"
                    [(ngModel)]="product.coverageTerm" required="true" class="bodyText, inputWidth" />
            </td>
            <td>
                <div *ngIf="
                coverageTerm.invalid &&
                (coverageTerm.dirty || coverageTerm.touched || submitted)
              " class="errorText">
                    <div *ngIf="coverageTerm.errors != null && coverageTerm.errors.required">
                        Product coverage term is required.
                    </div>
                </div>
            </td>
        </tr>

        <tr>
            <td width="20%" style="font-weight: bold" class="bodyText">
                Product Assured Sum
            </td>
            <td>
                <input pInputText id="assuredSum" name="assuredSum" #assuredSum="ngModel" type="text"
                    [(ngModel)]="product.assuredSum" required="true" class="bodyText, inputWidth" />
            </td>
            <td>
                <div *ngIf="
                assuredSum.invalid &&
                (assuredSum.dirty || assuredSum.touched || submitted)
              " class="errorText">
                    <div *ngIf="
                    assuredSum.errors != null &&
                    assuredSum.errors.required
                ">
                        Product assured sum is required.
                    </div>
                </div>
            </td>
        </tr>

        <tr>
            <td width="20%" style="font-weight: bold" class="bodyText">
                Product Premium Term
            </td>
            <td>
                <input pInputText id="premiumTerm" name="premiumTerm" #premiumTerm="ngModel" type="text"
                    [(ngModel)]="product.premiumTerm" required="true" class="bodyText, inputWidth" />
            </td>
            <td>
                <div *ngIf="
                premiumTerm.invalid &&
                (premiumTerm.dirty ||
                premiumTerm.touched ||
                  submitted)
              " class="errorText">
                    <div *ngIf="
                    premiumTerm.errors != null &&
                    premiumTerm.errors.required
                ">
                        Product Premium Term is required.
                    </div>
                </div>
            </td>
        </tr>

        <tr>
            <td width="20%" style="font-weight: bold" class="bodyText">Average Interest Rate</td>
            <td>
                <input id="avgInterestRate" name="avgInterestRate" #avgInterestRate="ngModel" type="text"
                    [(ngModel)]="product.averageInterestRate" required="true" class="bodyText, inputWidth" />
            </td>
            <td>
                <div *ngIf="
                avgInterestRate.invalid &&
                (avgInterestRate.dirty || avgInterestRate.touched || submitted)
              " class="errorText">
                    <div *ngIf="avgInterestRate.errors != null && avgInterestRate.errors.required">
                        Average Interest Rate is required.
                    </div>
                </div>
            </td>
        </tr>


        <tr>
            <td width="20%" style="font-weight: bold" class="bodyText">Policy Currency Value</td>
            <td>
                <select id="policyCurrency" name="policyCurrency" ng-model="product.policyCurrency" required="true" r>
                    <option value="PolicyCurrencyEnum.SGD"> SGD </option>
                    <option value="PolicyCurrencyEnum.USD"> USD </option>
                    <option value="PolicyCurrencyEnum.NZD"> NZD </option>
                    <option value="PolicyCurrencyEnum.EUR"> EUR </option>
                    <option value="PolicyCurrencyEnum.GBP"> GBP </option>
                    <option value="PolicyCurrencyEnum.MYR"> MYR </option>
                    <option value="PolicyCurrencyEnum.HKD"> HKD </option>
                    <option value="PolicyCurrencyEnum.RMB"> RMB </option>
                </select>
            </td>

        </tr>


        <tr>
            <td width="20%" style="font-weight: bold" class="bodyText">Policy Currency Value</td>
            <td>
                <select id="smokerBoolean" name="smokerBoolean" ng-model="product.isAvailableToSmoker" required="true">
                    <option value="true"> Yes </option>
                    <option value="false"> No </option>
                </select>
            </td>

        </tr>

    </table>

    <br /><br />
    <div stlye="text-align: center;">
        <h2 class="secondaryHeader">Additional Features</h2>
        <p-button label="Add Feature" type="button" (click)="handleClickAddFeature()">
        </p-button>
    </div>


    <p-table id="tableFeature" [value]="product.listOfAdditionalFeatures" style="text-align: center">
        <ng-template pTemplate="header">
            <tr>
                <th>S/N</th>
                <th colspan="2">Feature name</th>
                <th colspan="2">Feature Description</th>
                <th>Action</th>
            </tr>
        </ng-template>

        <ng-template pTemplate="body" let-prod let-rowIndex="rowIndex">
            <tr>
                <td>{{ rowIndex + 1 }}</td>

                <td>
                    <input pInputText id="featureName" name="featureName" #featureName="ngModel" type="text"
                        [(ngModel)]="prod.featureName" required="true" />
                </td>
                <td>
                    <div *ngIf="
                    featureName.invalid && (featureName.dirty || featureName.touched || submitted)
              " class="errorText">
                        <div *ngIf="featureName.errors != null && featureName.errors.required">
                            Feature Name is required.
                        </div>
                    </div>
                </td>

                <td>
                    <input pInputText id="featureDescription" name="featureDescription" #featureDescription="ngModel"
                        type="text" [(ngModel)]="prod.featureDescription" required="true" />
                </td>
                <td>
                    <div *ngIf="
                    featureDescription.invalid &&
                (featureDescription.dirty || featureDescription.touched || submitted)
              " class="errorText">
                        <div *ngIf="
                        featureDescription.errors != null &&
                        featureDescription.errors.required
                ">
                            Feature Description is required.
                        </div>
                    </div>
                </td>

                <td>
                    <p-button label="Delete" type="button" (click)="handleClickRemoveFeature(rowIndex)"></p-button>
                </td>
            </tr>
        </ng-template>
    </p-table>

    <br />
    <h2 class="secondaryHeader">Riders For Product</h2>
    <p-button label="Add Rider" type="button" (click)="handleClickAddRider()"></p-button>

    <p-table id="tableRider" [value]="product.listOfRiders" style="text-align: center">
        <ng-template pTemplate="header">
            <tr>
                <th>S/N</th>
                <th colspan="2">Rider name</th>
                <th colspan="2">Rider Premium Value</th>
                <th colspan="2">Rider Description</th>
                <th>Action</th>
            </tr>
        </ng-template>

        <ng-template pTemplate="body" let-rider let-rowIndex="rowIndex">
            <tr>
                <td>{{ rowIndex + 1 }}</td>

                <td>
                    <input pInputText id="riderName" name="riderName" #riderName="ngModel" type="text"
                        [(ngModel)]="rider.riderName" required="true" />
                </td>
                <td>
                    <div *ngIf="
                    riderName.invalid && (riderName.dirty || riderName.touched || submitted)
              " class="errorText">
                        <div *ngIf="riderName.errors != null && riderName.errors.required">
                            Rider Name is required.
                        </div>
                    </div>
                </td>

                <td>
                    <input pInputText id="riderPremiumValue" name="riderPremiumValue" #riderPremiumValue="ngModel"
                        type="text" [(ngModel)]="rider.riderPremiumValue" required="true" />
                </td>
                <td>
                    <div *ngIf="
                    riderPremiumValue.invalid &&
                (riderPremiumValue.dirty || riderPremiumValue.touched || submitted)
              " class="errorText">
                        <div *ngIf="
                        riderPremiumValue.errors != null &&
                        riderPremiumValue.errors.required
                ">
                            Rider premium value is required.
                        </div>
                    </div>
                </td>

                <td>
                    <input pInputText id="riderDescription" name="riderDescription" #riderDescription="ngModel"
                        type="text" [(ngModel)]="rider.riderDescription" required="true" />
                </td>
                <td>
                    <div *ngIf="
                    riderDescription.invalid &&
                (riderDescription.dirty || riderDescription.touched || submitted)
              " class="errorText">
                        <div *ngIf="
                        riderDescription.errors != null &&
                        riderDescription.errors.required
                ">
                            Rider Description is required.
                        </div>
                    </div>
                </td>

                <td>
                    <p-button label="Delete" type="button" (click)="handleClickRemoveRider(rowIndex)"></p-button>
                </td>
            </tr>
        </ng-template>
    </p-table>


    <br />
    <div style="text-align: center">
        <p-button (click)="clear()">Clear</p-button>
        &nbsp;
        <input pInputText type="submit" value="Create" />
    </div>


</form>